/*!
	Slimbox v2.05 - The ultimate lightweight Lightbox clone for jQuery
	(c) 2007-2013 Christophe Beyls <http://www.digitalia.be>
	MIT-style license.
	Modified by Neil Storer <http://www.trips.elusien.co.uk>
	Modified by Travis Hydzik <http://thydzik.com>
*/
!function(i){function e(){var e=C.scrollLeft(),t=C.width();i([k,K]).css("left",e+t/2),g&&i(I).css({left:e,top:C.scrollTop(),width:t,height:C.height()})}function t(t){t?i("object").add(O?"select":"embed").each(function(i,e){W[i]=[e,e.style.visibility],e.style.visibility="hidden"}):(i.each(W,function(i,e){e[0].style.visibility=e[1]}),W=[]);var o=t?"bind":"unbind";C[o]("scroll resize",e),i(document)[o]("keydown",n)}function n(e){var t=e.which,n=i.inArray;return n(t,h.closeKeys)>=0?c():n(t,h.nextKeys)>=0?a():n(t,h.previousKeys)>=0?o():null}function o(){return l(p)}function a(){return l(y)}function l(i){return i>=0&&(M=i,f=u[M][0],p=(M||(h.loop?u.length:0))-1,y=(M+1)%u.length||(h.loop?0:-1),d(),k.className="lbLoading",A=new Image,A.onload=r,A.src=f),!1}function r(){k.className="";var e=h.scaler*Math.min(i(window).width()/A.width,i(window).height()/A.height);A.width*=e,A.height*=e,i(L).attr({src:f}),i(D).css({visibility:"hidden",display:""}),i(T).width(A.width),i([T,z,H]).height(A.height),i(F).html(u[M][1]||""),i(N).html((u.length>1&&h.counterText||"").replace(/{x}/,M+1).replace(/{y}/,u.length)),p>=0&&(B.src=u[p][0]),y>=0&&(S.src=u[y][0]),m=D.offsetWidth,b=D.offsetHeight;var t=Math.max(0,v-b/2);k.offsetHeight!==b&&i(k).animate({height:b,top:t},h.resizeDuration,h.resizeEasing),k.offsetWidth!==m&&i(k).animate({width:m,marginLeft:-m/2},h.resizeDuration,h.resizeEasing),i(k).queue(function(){i(K).css({width:m,top:t+b,marginLeft:-m/2,visibility:"hidden",display:""}),i(D).css({display:"none",visibility:"",opacity:""}).fadeIn(h.imageFadeDuration,s)})}function s(){p>=0&&i(z).show(),y>=0&&i(H).show(),i(E).css("marginTop",-E.offsetHeight).animate({marginTop:0},h.captionAnimationDuration),K.style.visibility=""}function d(){A.onload=null,A.src=B.src=S.src=f,i([k,D,E]).stop(!0),i([z,H,D,K]).hide()}function c(){return M>=0&&(d(),M=p=y=-1,i(k).hide(),i(I).stop().fadeOut(h.overlayFadeDuration,t)),!1}var h,u,f,p,y,g,v,m,b,w,x,I,k,D,L,T,z,H,K,E,F,N,C=i(window),M=-1,O=!window.XMLHttpRequest,W=[],A=(document.documentElement,{}),B=new Image,S=new Image;i(function(){i("body").append(i([I=i('<div id="lbOverlay" />').click(c)[0],k=i('<div id="lbCenter" />')[0],K=i('<div id="lbBottomContainer" />')[0]]).css("display","none")),D=i('<div id="lbImage" />').appendTo(k).append(T=i('<div style="position: relative;" />').append([L=i('<img id="lbSlide" src="white.gif" alt="" />')[0],H=i('<a id="lbNextLink" href="#" />').text(".").click(a)[0],z=i('<a id="lbPrevLink" href="#" />').text(".").click(o)[0]])[0])[0],window.nextlink=document.getElementById("lbNextLink"),E=i('<div id="lbBottom" />').appendTo(K).append([i('<a id="lbCloseLink" href="#" />').click(c)[0],F=i('<div id="lbCaption" />')[0],N=i('<div id="lbNumber" />')[0],i('<div style="clear: both;" />')[0]])[0]}),i.slimbox=function(n,o,r){return h=i.extend({loop:!1,overlayOpacity:.8,overlayFadeDuration:400,resizeDuration:400,resizeEasing:"swing",initialWidth:250,initialHeight:250,slideInterval:0,scaler:.75,imageFadeDuration:400,captionAnimationDuration:400,counterText:"Image {x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78]},r),"string"==typeof n&&(n=[[n,o]],o=0),v=C.scrollTop()+C.height()/2,m=h.initialWidth,b=h.initialHeight,w=h.slideInterval,i(k).css({top:Math.max(0,v-b/2),width:m,height:b,marginLeft:-m/2}).show(),g=O||I.currentStyle&&"fixed"!==I.currentStyle.position,g&&(I.style.position="absolute"),i(I).css("opacity",h.overlayOpacity).fadeIn(h.overlayFadeDuration),e(),t(1),u=n,h.loop=h.loop&&u.length>1,w>0?x=setInterval(function(){a()},1e3*w):clearInterval(x),l(o)},i.fn.slimbox=function(e,t,n){t=t||function(i){return[i.href,i.title]},n=n||function(){return!0};var o=this;return h=i.extend({slideInterval:0},e),w=h.slideInterval,o.unbind("click").click(function(){var a,l,r=this,s=0,d=0;for(a=i.grep(o,function(i,e){return n.call(r,i,e)}),l=a.length;l>d;++d)a[d]===r&&(s=d),a[d]=t(a[d],d);return i.slimbox(a,s,e)})}}(jQuery);
